<Patch>
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Metals+</li>
    </mods>
    <match Class="PatchOperationSequence">
      <success>Always</success>
      <operations>
        <!-- Copper -->
        <li Class="PatchOperationAddModExtension">
          <xpath>Defs/ThingDef[defName="Copper"]</xpath>
          <value>
            <li Class="SurvivalTools.StuffPropsTool">
              <toolStatFactors>
                <TreeFellingSpeed>1.05</TreeFellingSpeed>
                <PlantHarvestingSpeed>1.08</PlantHarvestingSpeed>
                <DiggingSpeed>1.08</DiggingSpeed>
                <MiningYieldDigging>1.05</MiningYieldDigging>
                <ConstructionSpeed>1.08</ConstructionSpeed>
                <MedicalOperationSpeed>1.12</MedicalOperationSpeed>
              </toolStatFactors>
              <wearFactorMultiplier>1.2</wearFactorMultiplier>
            </li>
          </value>
        </li>
        <!-- Tin -->
        <li Class="PatchOperationAddModExtension">
          <xpath>Defs/ThingDef[defName="Tin"]</xpath>
          <value>
            <li Class="SurvivalTools.StuffPropsTool">
              <toolStatFactors>
                <DiggingSpeed>1.12</DiggingSpeed>
                <MiningYieldDigging>1.08</MiningYieldDigging>
                <ConstructionSpeed>1.12</ConstructionSpeed>
              </toolStatFactors>
              <wearFactorMultiplier>1.25</wearFactorMultiplier>
            </li>
          </value>
        </li>
        <!-- Iron (add MiningYieldDigging for consistency) -->
        <li Class="PatchOperationAddModExtension">
          <xpath>Defs/ThingDef[defName="Iron"]</xpath>
          <value>
            <li Class="SurvivalTools.StuffPropsTool">
              <toolStatFactors>
                <TreeFellingSpeed>1.10</TreeFellingSpeed>
                <PlantHarvestingSpeed>1.10</PlantHarvestingSpeed>
                <DiggingSpeed>1.12</DiggingSpeed>
                <MiningYieldDigging>1.10</MiningYieldDigging>
                <ConstructionSpeed>1.12</ConstructionSpeed>
              </toolStatFactors>
            </li>
          </value>
        </li>
        <!-- Titanium (only add if no extension exists) -->
        <li Class="PatchOperationConditional">
          <xpath>Defs/ThingDef[defName="Titanium"]/modExtensions</xpath>
          <nomatch Class="PatchOperationAddModExtension">
            <xpath>Defs/ThingDef[defName="Titanium"]</xpath>
            <value>
              <li Class="SurvivalTools.StuffPropsTool">
                <toolStatFactors>
                  <TreeFellingSpeed>1.25</TreeFellingSpeed>
                  <PlantHarvestingSpeed>1.25</PlantHarvestingSpeed>
                  <DiggingSpeed>1.1</DiggingSpeed>
                  <ConstructionSpeed>1.1</ConstructionSpeed>
                </toolStatFactors>
                <wearFactorMultiplier>0.9</wearFactorMultiplier>
              </li>
            </value>
          </nomatch>
        </li>
        <!-- Bronze -->
        <li Class="PatchOperationAddModExtension">
          <xpath>Defs/ThingDef[defName="Bronze"]</xpath>
          <value>
            <li Class="SurvivalTools.StuffPropsTool">
              <toolStatFactors>
                <TreeFellingSpeed>1.08</TreeFellingSpeed>
                <PlantHarvestingSpeed>1.08</PlantHarvestingSpeed>
                <DiggingSpeed>1.10</DiggingSpeed>
                <MiningYieldDigging>1.08</MiningYieldDigging>
                <ConstructionSpeed>1.10</ConstructionSpeed>
              </toolStatFactors>
              <wearFactorMultiplier>1.15</wearFactorMultiplier>
            </li>
          </value>
        </li>
      </operations>
    </match>
  </Operation>
</Patch>