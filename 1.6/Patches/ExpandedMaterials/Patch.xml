<?xml version="1.0" encoding="utf-8"?>
<Patch>
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Expanded Materials - Metals</li>
    </mods>
    <match Class="PatchOperationSequence">
      <success>Always</success>
      <operations>

        <!-- Copper -->
        <li Class="PatchOperationAddModExtension">
          <xpath>Defs/ThingDef[defName="EM_Copper"]</xpath>
          <value>
            <li Class="SurvivalTools.StuffPropsTool">
              <toolStatFactors>
                <TreeFellingSpeed>1.05</TreeFellingSpeed>
                <PlantHarvestingSpeed>1.08</PlantHarvestingSpeed>
                <DiggingSpeed>1.05</DiggingSpeed>
                <MiningYieldDigging>1.05</MiningYieldDigging>
                <ConstructionSpeed>1.08</ConstructionSpeed>
                <MedicalOperationSpeed>1.12</MedicalOperationSpeed>
              </toolStatFactors>
              <wearFactorMultiplier>1.2</wearFactorMultiplier>
            </li>
          </value>
        </li>

        <!-- Lead -->
        <li Class="PatchOperationAddModExtension">
          <xpath>Defs/ThingDef[defName="EM_Lead"]</xpath>
          <value>
            <li Class="SurvivalTools.StuffPropsTool">
              <toolStatFactors>
                <TreeFellingSpeed>1.05</TreeFellingSpeed>
                <PlantHarvestingSpeed>1.05</PlantHarvestingSpeed>
                <DiggingSpeed>1.08</DiggingSpeed>
                <MiningYieldDigging>1.08</MiningYieldDigging>
                <ConstructionSpeed>1.12</ConstructionSpeed>
              </toolStatFactors>
              <wearFactorMultiplier>1.25</wearFactorMultiplier>
            </li>
          </value>
        </li>

        <!-- Bronze -->
        <li Class="PatchOperationAddModExtension">
          <xpath>Defs/ThingDef[defName="EM_Bronze"]</xpath>
          <value>
            <li Class="SurvivalTools.StuffPropsTool">
              <toolStatFactors>
                <TreeFellingSpeed>1.08</TreeFellingSpeed>
                <PlantHarvestingSpeed>1.08</PlantHarvestingSpeed>
                <DiggingSpeed>1.10</DiggingSpeed>
                <MiningYieldDigging>1.08</MiningYieldDigging>
                <ConstructionSpeed>1.10</ConstructionSpeed>
              </toolStatFactors>
              <wearFactorMultiplier>1.15</wearFactorMultiplier>
            </li>
          </value>
        </li>

        <!-- Iron (add MiningYieldDigging for consistency) -->
        <li Class="PatchOperationAddModExtension">
          <xpath>Defs/ThingDef[defName="EM_Iron"]</xpath>
          <value>
            <li Class="SurvivalTools.StuffPropsTool">
              <toolStatFactors>
                <TreeFellingSpeed>1.10</TreeFellingSpeed>
                <PlantHarvestingSpeed>1.10</PlantHarvestingSpeed>
                <DiggingSpeed>1.12</DiggingSpeed>
                <MiningYieldDigging>1.10</MiningYieldDigging>
                <ConstructionSpeed>1.12</ConstructionSpeed>
              </toolStatFactors>
            </li>
          </value>
        </li>

        <!-- Mild Steel -->
        <li Class="PatchOperationAddModExtension">
          <xpath>Defs/ThingDef[defName="EM_MildSteel"]</xpath>
          <value>
            <li Class="SurvivalTools.StuffPropsTool">
              <toolStatFactors>
                <TreeFellingSpeed>1.12</TreeFellingSpeed>
                <PlantHarvestingSpeed>1.12</PlantHarvestingSpeed>
                <DiggingSpeed>1.12</DiggingSpeed>
                <ConstructionSpeed>1.12</ConstructionSpeed>
              </toolStatFactors>
            </li>
          </value>
        </li>

        <!-- Stainless Steel -->
        <li Class="PatchOperationAddModExtension">
          <xpath>Defs/ThingDef[defName="EM_StainlessSteel"]</xpath>
          <value>
            <li Class="SurvivalTools.StuffPropsTool">
              <toolStatFactors>
                <TreeFellingSpeed>1.1</TreeFellingSpeed>
                <PlantHarvestingSpeed>1.1</PlantHarvestingSpeed>
                <DiggingSpeed>1.05</DiggingSpeed>
                <ConstructionSpeed>1.05</ConstructionSpeed>
              </toolStatFactors>
            </li>
          </value>
        </li>

        <!-- Tempered Steel -->
        <li Class="PatchOperationAddModExtension">
          <xpath>Defs/ThingDef[defName="EM_TemperedSteel"]</xpath>
          <value>
            <li Class="SurvivalTools.StuffPropsTool">
              <toolStatFactors>
                <TreeFellingSpeed>1.25</TreeFellingSpeed>
                <PlantHarvestingSpeed>1.25</PlantHarvestingSpeed>
                <DiggingSpeed>1.1</DiggingSpeed>
                <MiningYieldDigging>1.1</MiningYieldDigging>
                <ConstructionSpeed>1.1</ConstructionSpeed>
              </toolStatFactors>
              <wearFactorMultiplier>0.9</wearFactorMultiplier>
            </li>
          </value>
        </li>

        <!-- Titanium -->
        <li Class="PatchOperationAddModExtension">
          <xpath>Defs/ThingDef[defName="EM_Titanium"]</xpath>
          <value>
            <li Class="SurvivalTools.StuffPropsTool">
              <toolStatFactors>
                <TreeFellingSpeed>1.30</TreeFellingSpeed>
                <PlantHarvestingSpeed>1.30</PlantHarvestingSpeed>
                <DiggingSpeed>1.20</DiggingSpeed>
                <ConstructionSpeed>1.20</ConstructionSpeed>
                <MiningYieldDigging>1.15</MiningYieldDigging>
              </toolStatFactors>
            </li>
          </value>
        </li>

      </operations>
    </match>
  </Operation>
</Patch>